---
layout: post
title: 'Instalar Ubuntu Minimal: Primera parte'
date: '2012-07-24T06:47:00.000-05:00'
author: Rcart
tags: 
modified_time: '2012-07-25T05:28:13.973-05:00'
thumbnail: http://2.bp.blogspot.com/-YDKVOZPwsGA/UA5qZLXtn7I/AAAAAAAAAGw/RVNATPklMmo/s72-c/shot3-others-.jpg
blogger_id: tag:blogger.com,1999:blog-4654114015230862603.post-3056333087879225693
blogger_orig_url: http://rcartbitacora.blogspot.com/2012/07/instalar-ubuntu-minimal-1204-primera.html
---

Como dice el título, en un seria de post (espero solo sean dos) les mostraré los pasos que segui para poder tener una instalacion <b>minimalista</b> de Ubuntu 12.04 (Precise Pangolin). Advierto que esta instalacion no es recomendable para usuarios principiantes.<br /><a name='more'></a><br /><br />Primero que nada quisiera explicarles mis motivos principales para optar por este tipo de instalacion. Tengo 2 años de ser usuario de <a href="http://www.enlightenment.org/">Enlightenment 17</a>, ya que desde que lo conocí deje de utilizar Gnome (version 2 por aquel entonces) y sus asombrosos efectos con compiz. Nunca tuve la oportunidad de probar KDE debido a que tenia un equipo de escasos recursos, pero en las ocasiones que pude utilizarlo me parecio un entorno de escritorio bastante agradable y muy, muy completo.<br /><br />La instalacion de Enlightenment la hacia desde las fuentes, ya me parecia algo agridulce cuando tenia problemas de dependecias, configuraciones y demas problemas que se suelen encontrar el compilar este WM (Window Manager) desde su codigo fuente. Para bien de mi salud emocional siempre fui capaz de instalarlo y disfrutar de su velocidad, personalizacion y como no, su increible "Eye Candy".<br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-YDKVOZPwsGA/UA5qZLXtn7I/AAAAAAAAAGw/RVNATPklMmo/s1600/shot3-others-.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="180" src="http://2.bp.blogspot.com/-YDKVOZPwsGA/UA5qZLXtn7I/AAAAAAAAAGw/RVNATPklMmo/s320/shot3-others-.jpg" width="320" /></a></div><center><i>Mi escritorio con Enlightenment</i></center><br /><br />Cada vez que salia una nueva version de ubuntu hacia una instalacion desde cero, osea, formateaba mi instalacion actual e instalaba la nueva version. Una vez instalada, descargaba las fuentes de Enlightenment, compilaba, instalaba y disfrutaba de mi nueva version de Ubuntu con lo ultimo de E17. Con la aparicion de Unity, nada cambio con mi preferencia por Enlightenment.<br /><br />Ubuntu nos provee con un set de paquetes que posiblemente cumplan con las necesidades de la mayoria de los usuarios, y todo "out of the box". Pero muchas veces resulta algo molesto contar con una gran cantidad de aplicaciones que nunca utilizaremos y quizas ni sabemos que estan alli, y si queres desinstalar una, por resulucion de dependencias terminamos rompiendo cosas. (Si somos precavidos y seguros de lo que hacemos, posiblemente no sea un problema)<br /><br />Probablemente despues de tanto tiempo personalizando escritorios que eran muy agradables visualmente, me harté de tanto "Eye Candy". Ahora queria algo a mi medida, simple, rapido, estable, configurable y productivo. Pero claro, algo agradable a la vista.<br /><br />Actualmente cuento con un equipo (portatil) bastante bueno (Intel i3, 6GB RAM, 500HD) capaz de levantar cualquier entorno grafico, pero creo ser yo el problema.<br /><br />En fin, despues de una innecesaria introduccion, comencemos.<br /><br />El proceso de instalacion lo haremos de esta manera:<br /><ol><li>Arranque del sistema de instalacion desde Grub2(Kernel + instalador)</li><li>Post-instalacion del sistema base</li><li>Administracion de energia y herramientas del sistema</li><li>Multimedia y otras hierbas<br /></li><li>Instalacion del WM y aplicaciones graficas</li><li>Conlusiones</li></ol><hr /><ul><li><h3>Arranque del sistema base</h3></li></ul>Partiendo de la instalacion actual descargaremos dichos archivos, agregaremos una nueva entrada al grub, y comenzaremos la instalacion. (Omitiré *muchos* pasos, vease el primer parrafo de este post)  <br /><blockquote>sudo wget http://archive.ubuntu.com/ubuntu/dists/precise/main/installer-amd64/current/images/netboot/ubuntu-installer/amd64/initrd.gz -O /initrd.gz sudo wget http://archive.ubuntu.com/ubuntu/dists/precise/main/installer-amd64/current/images/netboot/ubuntu-installer/amd64/linux -O /linux  </blockquote>Modificamos grub: <br /><blockquote>sudo vim /etc/grub.d/40_custom</blockquote>Agregamos la nueva entrada del grub: <br /><blockquote>menuentry "Ubuntu Minimal Install" {<br />set root='(hd0,0)'  <br />linux /linux  <br />initrd /initrd.gz  <br />} <br /></blockquote><br />Actualizamos: <br /><blockquote>sudo update-grub</blockquote><br />Y con esto tenemos listo el medio de instalacion para la version minimal. Despues de reiniciar obtentedremos una nueva entrada en el GRUB para comenzar la instalacion.  Para poder realizar esa instalacion deben contar con un cable ethernet, ya que es probable que la tarjeta wifi no sea reconocida por el kernel en primera instancia. (A decir verdad, el problema es mas comun con las Broadcom, como la mia: 4313)<br /><br />Realicen la instalacion de manera precavida, formateen las particiones necesarias (normalmente solo formateo la particion root) y <b>no seleccion mas paquetes para instalar!</b>.  <br /><br />Una vez tengan el sistema base instalado, reinicien y entren en su nueva instalacion.  <br /><br /><ul><li><h3>Post-instalacion del sistema base</h3></li></ul>Si llegaron hasta aqui y no se han arrepentido, significa que vamos por buen camino. No voy a dar detalles de para que sirve cada paquete que vaya instalando, si queren saber al respecto pueden buscarlo por su cuenta.  <br /><br />Primero que nada si tienen un portatil van a querer deshacerse del cable ethernet. Cada tarjeta wifi tiene su procedimiento para hacerlo funcionar. La mia es una Broadcom 4313.  <br /><br />Ubuntu 12.04 tiene exactamente la misma version que Broadcom, la cual incluye soporte para modo monitor (pero no inyeccion de trafico) y otras mejoras. Asi que utilizare el paquete de Ubuntu y evitaré descargar y realizar todo el proceso de instalacion de un driver de red desde las fuentes.  <br /><br />Primero instalamos paquetes de compilacion: <br /><blockquote>sudo apt-get install --no-install-recommends build-enssential git-core bzr</blockquote><br />Driver de wifi Broadcom y utilidades de conexion inalambrica: <br /><blockquote>sudo apt-get install --no-install-recommmends wireless-tools wpasupplicant bcmwl-kernel-source wicd-curses </blockquote><br />Despues cargamos los modulos de wifi (o reinician), ejecutamos wicd-curses y nos conectamos a nuestra red inalambrica.  <br /><br /><ul><li>Administracion de energia y herramientas del sistema</li></ul>Ahora viene un apartado algo complicado (segun mi experiencia), y este es la administracion de energia.  <br /><br />Un equipo portatil requiere de demonios que esten monitoreando eventos que se generan (un desktop tambien, pero hay eventos unicos en un portatil como cuando cerramos la tapa), la frecuencia del CPU, la escritura del disco duro, etc. Todo esto con el fin de alargar la duracion de la bateria.  Asi que para tener un buen control de energia, instalaremos un conjunto de paquetes que nos proporcionan un excelente ahorro de energia y control de eventos: <br /><blockquote>sudo apt-get install --no-install-recommends acpid acpi laptop-mode-tools cpufreqd cpufrequtils pm-utils upower </blockquote><br />Despues de eso cierren la tapa del portatil y el equipo deberia deberia suspenderse. De no ser asi, reinicien e intentan de nuevo. Si todo falla. Hay problemas.  <br /><br />En mi caso el portatil no suspendia al cerrar la tapa, lo cual es algo imperdonable e inimaginable. Esta fue la manera de solucionarlo.  <br /><br />Dentro del directorio /etc/acpi/events encontraremos un conjunto de scripts que se ejecutan al generarse ciertos eventos. En mi caso, el evento a depurar es <b>lidbtn</b>  <br /><br />Como vemos, el contenido es el siguiente: <br /><blockquote># /etc/acpi/events/lidbtn<br />#Called when the user closes or opens the lid<br />event=button[ /]lid <br />action=/etc/acpi/lid.sh</blockquote><br />Ahora bien, el problema en mi caso es que acpi obtiene erroneamente el identificador de la pantalla de mi portatil, y el evento "<b>event=button[ /]lid</b>" nunca se ejecturá lo que conlleva a que el equipo no suspenda.  <br /><br />Para obtener el identificador correcto de la pantalla, debemos poner a la escucha los eventos de acpi. Entonces, en una consola hacemos: <br /><blockquote>acpi_listen</blockquote><br />Y con eso estamos a la espera de que se generen eventos referentes a la energia del equipo. Entonces, cerramos la tapa del portatil (el equipo no suspende), la volvemos a abrir, y en la consola anterior obtendremos el identificador correcto. En mi caso obtuve esto: <br /><blockquote><b>button/lid LID0</b> 00000080 00000003</blockquote><br />En negrita esta el identificador correcto, asi que procedemos a modificar el archivo del evento, y como resultado esto: <br /><blockquote># /etc/acpi/events/lidbtn <br />#Called when the user closes or opens the lid <br />event=button/lid (LID)  <br />action=/usr/sbin/pm-suspend </blockquote><br />Guardamos, cerramos la tapa y el equipo deberia suspender sin ningun problema.  <br /><br />Herramientas del sistema (hacerlo linea por linea): <br /><blockquote>sudo apt-get install  rar unrar zip unzip notify-ods libnotify-bin <br />sudo apt-get install --no-install-recommends apt-file rxvt-unicode-255colors gdebi-core htop tree traceroute nmap vim</blockquote><br />Instalamos el servidor Xorg (tengo una tarjeta de video Intel integrada):<br /><blockquote>sudo apt-get install xserver-xorg xserver-xorg-video-intel mesa-utils xfonts-terminus</blockquote><br />Y bien. Despues de todo este proceso deberiamos tener una instalacion completamente funcional, con un sistema basico y bien equipado. Solo falta instalar el apartado multimedia y grafico. Despues estariamos listos.<br /><br />Por los momentos es todo. Aqui son las 05:45 am y no he dormido nada. Mañana (hoy? Creo estar confundido, estoy medio dormido) continuo con lo restante para dar por finalizada la instalacion.<br /><br />Cualquier cosa no duden en dejar un comentario al respecto.<br /><br />Saludos.